<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
<title>无标题文档</title>
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
 	
      <!-- HTML5 Shiv 和 Respond.js 用于让 IE8 支持 HTML5元素和媒体查询 -->
      <!-- 注意： 如果通过 file://  引入 Respond.js 文件，则该文件无法起效果 -->
      <!--[if lt IE 9]>
         <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
         <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
      <![endif]-->

	  <style>

body {
    background:url(../img/login_bg_0.jpg) #F0F0F0;
}
.mycenter{
    margin-top: 100px;
    margin-left: auto;
    margin-right: auto;
    height: 350px;
    width:500px;
    padding: 5%;
    padding-left: 5%;
    padding-right: 5%;
}
.mycenter mysign{
    width: 440px;
}
.mycenter input,checkbox,button{
    margin-top:2%;
    margin-left: 10%;
    margin-right: 10%;
}
.mycheckbox{
    margin-top:10px;
    margin-left: 40px;
    margin-bottom: 10px;
    height: 10px;
} 
</style>

</head>

<body>
	 <form action="/login" method="post">
            <div class="mycenter">
            <div class="mysign">
                <div class="col-lg-11 text-center text-info">
                    <h2>以物易物系统</h2>
                </div>
                <div class="col-lg-10">
                    <input type="text" class="form-control" id="loginAccount" name="loginAccount" placeholder="请输入账户名" required autofocus/>
                </div>
                <div class="col-lg-10"></div>
                <div class="col-lg-10">
                    <input type="password" class="form-control" id="password" name="password" placeholder="请输入密码" required autofocus/>
                </div>
                <div class="col-lg-10"></div>
                <div class="col-lg-10 mycheckbox checkbox">
                    <input type="checkbox" class="col-lg-1">记住密码</input>
					
                </div>
                <div class="col-lg-10">
									<div class="dropdown">
										 <button type="button" class="btn dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown">身份
											<span class="caret"></span>
											</button>
					<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">
						<li role="presentation">
							<a role="menuitem" tabindex="-1" href="" id="logintype" name="user">用户</a>
						</li>
						<li role="presentation">
							<a role="menuitem" tabindex="-1" href="" name="admin">管理员</a>
						</li>
					</ul>
				</div>
								</div>
                <div class="col-lg-10">
                    <button type="button" class="btn btn-success col-lg-12" id="login_btn">登录</button>
                </div>
				
            </div>
        </div>
        </form>
</body>
<!-- jQuery (Bootstrap 的 JavaScript 插件需要引入 jQuery) -->
<script src="https://code.jquery.com/jquery.js"></script>
<!-- 包括所有已编译的插件 -->
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script type="application/javascript">
    $(document).ready(function(){
        $("#login_btn").click(function () {
            alert("haha");
            var loginAccount = $("#loginAccount").val();
            var password = $("#password").val();
            var logintype= $("#logintype").attr("name");
            var mydata = '{'+
                    '"loginAccount" : "' + loginAccount + '",'+
                    '"password" : "'+ password + '",'+
                        '"logintype" : "' +logintype
                +'"}';
            alert(mydata);

           $.ajaxSetup({
               contentType : 'application/json'
           });

           $.post("/login",mydata,function (json,status) {
               var obj = json;
               alert(obj+"obj"+obj.message);
               alert(json+"json"+json.message);
               if(obj.message == "succeed"){
                   if (obj.data.loginType == "user"){
                       window.location.href='/index.html';
                   }else if (obj.data.loginType == "admin"){

                   }
               }
           },"json");
            /*
                      $.ajax({
                          type : 'POST',
                          contentType : 'application/json',
                          url : '/login',
                          processData : false,
                          dataType : 'json',
                          data : mydata,
                          success : function(data) {
                              var obj = JSON.parse(data);
                              alert(obj.message);
                          },
                          error : function() {
                              alert('Err...');
                          }
                      });
                      */

        });
    });
</script>
</html>

